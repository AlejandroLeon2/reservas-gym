<section class="container mx-auto px-4 py-8 space-y-8">
  <!-- Header -->
  <header class="text-center">
    <h2 class="text-4xl font-bold text-black font-bebas  mb-2">
      CLASES DISPONIBLES
    </h2>
  </header>


  <ul class="grid grid-cols-1 sm:grid-cols-2  md:grid-cols-3 xl:grid-cols-3 gap-6">
    @for (item of data; track item.id ) {
      <li class="flex w-full h-full">
 
        <article class="relative w-full flex flex-col bg-slate-900 rounded-2xl overflow-hidden border border-yellow-400 border-opacity-20 shadow-xl hover:shadow-2xl transition-all duration-300 group">
          

          <div class="relative overflow-hidden h-64">
            <img
              src="{{item.imagenClase || '/images/gato.jpg'}}"
              [alt]="'Imagen de ' + item.nombre"
              class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"
            />
            
  
            <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent flex items-end">
              <h3 class="font-bebas text-2xl text-white tracking-wider p-4 w-full">
                {{ item.nombre }}
              </h3>
            </div>

            <div class="absolute top-4 right-4 px-3 py-1.5 text-white text-sm font-bebas bg-slate-900 bg-opacity-80 border border-yellow-400 rounded-full">
              <span>Cupos: </span>
              <span class="text-yellow-400 font-bold">{{ item.cuposDisponibles }}</span>
            </div>
          </div>


          <div class="flex flex-col flex-grow p-6 space-y-4">
            

            <p class="text-slate-300 text-sm font-poppins line-clamp-2">
              {{ item.descripcion }}
            </p>

            <!-- Horario -->
            <div class="flex items-center gap-2 text-yellow-400 font-poppins">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <span class="font-semibold">{{ item.horario }}</span>
            </div>

            <!-- Entrenador -->
            <div class="flex items-center gap-2 text-slate-400 font-poppins text-sm">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
              </svg>
              <span>Entrenador ID: {{ item.entrenadorId }}</span>
            </div>

            <!-- Mensaje de error -->
            @if (getError(item.id)) {
              <div class="p-3 bg-red-500 bg-opacity-20 border border-red-500 text-red-400 rounded-lg text-xs font-poppins">
                {{ getError(item.id) }}
              </div>
            }

            <!-- Botones de acción -->
            <div class="pt-4 border-t border-slate-700">
              @if (isRegistered(item.id)) {
                <!-- Botón eliminar registro -->
                <button
                  (click)="eliminarseDeClase(item.id)"
                  [disabled]="isLoading(item.id) || item.cuposDisponibles === 0"
                  type="button"
                  class="w-full px-4 py-2.5 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-bebas tracking-wider flex items-center justify-center gap-2 active:scale-95"
                  aria-label="Cancelar registro en clase"
                >
                  @if (isLoading(item.id)) {
                    <div class="animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"></div>
                  } @else {
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  }
                  Cancelar Registro
                </button>
              } @else {
                <button
                  (click)="registrarseEnClase(item.id)"
                  [disabled]="isLoading(item.id) || item.cuposDisponibles === 0"
                  type="button"
                  class="w-full px-4 py-2.5 bg-yellow-400 hover:bg-yellow-500 text-slate-900 font-bold rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-bebas tracking-wider flex items-center justify-center gap-2 active:scale-95"
                  aria-label="Registrarse en clase"
                >
                  @if (isLoading(item.id)) {
                    <div class="animate-spin rounded-full h-4 w-4 border-2 border-slate-900 border-t-transparent"></div>
                  } @else {
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                    </svg>
                  }
                  Registrarse
                </button>
              }
            </div>

            @if (item.cuposDisponibles === 0) {
              <div class="p-3 bg-slate-800 border border-slate-700 text-slate-400 rounded-lg text-xs font-poppins text-center">
                No hay cupos disponibles
              </div>
            }
          </div>
        </article>
      </li>
    }
  </ul>


  @if (data.length === 0) {
    <div class="text-center py-12">
      <svg class="w-16 h-16 text-slate-600 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <p class="text-slate-400 font-poppins text-lg">No hay clases disponibles en este momento</p>
    </div>
  }
</section>